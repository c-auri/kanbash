#!/bin/bash

source $KANBASH_DIR/src/kanbash-utils

# causes array to be empty when there are no matches
shopt -s nullglob

todo=(${KANBASH_TASK_DIR}1-todo*)
doing=(${KANBASH_TASK_DIR}2-doing*)
done=(${KANBASH_TASK_DIR}3-done*)

counts=$(printf "%s\n" ${#todo[@]} ${#doing[@]} ${#done[@]})
num_rows=$(echo "$counts" | sort -n | tail -n1)

table="${KANBASH_TASK_DIR}.table"
echo "TODO,DOING,DONE" > $table

for (( i=0; i<$num_rows; i++ ))
do
    echo "$(get_title ${todo[i]}),$(get_title ${doing[i]}),$(get_title ${done[i]})" >> $table
done

column -t -s ',' $table
